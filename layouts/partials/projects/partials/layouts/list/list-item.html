{{ $project := .project }}
{{- $title := partial "PrepareHTML" $project.Title -}}
{{ $heading := printf "h%d" .heading_level }}
{{ $options := .options }}

<article class="project" itemscope itemtype="https://schema.org/CreativeWork">
  <div class="project-content">
    <div class="project-description">
      
      {{ partial "projects/partials/project/heading.html" (dict
          "title" $title
          "heading" $heading
          "subtitle" $project.Params.Subtitle
          "options" $options
          "url" $project.Permalink
        ) }}
      {{ if or $options.year $options.categories }}
        <div class="project-meta">
          {{ if and $options.year }}
            {{ with $project.Params.year }}
              {{ partial "projects/partials/project/year.html" . }}
            {{ end }}
          {{ end }}
              
          {{ if $options.categories }}
            {{ partial "projects/partials/project/categories.html" . }}
          {{ end }}
        </div>
      {{ end }}
      {{ if and $options.summary }}
        {{ with $project.Params.summary }}
          {{ partial "projects/partials/project/summary.html" (dict "summary" . ) }}
        {{ end }} 
      {{ end }}
    </div>
  </div>
  {{ if $options.image }}
    {{ partial "projects/partials/project/media.html" ( dict "image" $project.Params.image ) }}
  {{ end }}
</article>